---
import Layout from '../layouts/layout.astro';

const title = "Conecta con CCER | Enlaces Oficiales";
const description = "Punto de encuentro digital del Centro Cristiano El Redentor en Santiago de los Caballeros.";

// Estilos unificados para que todas las tarjetas sean iguales
const cardBaseStyles = "group flex items-center gap-4 p-4 rounded-2xl transition-all duration-500 border bg-white text-ccer-deep hover:shadow-subtle active:scale-[0.98]";
const iconBaseStyles = "w-10 h-10 rounded-xl flex items-center justify-center flex-none shadow-sm transition-transform group-hover:scale-105";

// "Ver Servicio en Vivo"
const liveAction = { 
  title: "Ver Servicio en Vivo", 
  subtitle: "Domingos 9:30 AM — Transmitiendo", 
  href: "https://youtube.com/@ccer", 
  icon: "play" 
};

// Web Principal
const mainWeb = {
  title: "Sitio Web Principal",
  subtitle: "Explora nuestra comunidad y recursos",
  href: "/",
  icon: "home"
};

const linkGroups = [
  {
    category: "Redes Sociales",
    links: [
      { title: "Facebook", subtitle: "CCER Oficial", href: "https://facebook.com/ccer", icon: "facebook" },
      { title: "Instagram", subtitle: "@ccersantiago", href: "https://instagram.com/ccer", icon: "instagram" },
      { title: "YouTube", subtitle: "Prédicas y Adoración", href: "https://youtube.com/@ccer", icon: "video" },
    ]
  },
  {
    category: "Contacto Directo",
    links: [
      { title: "Escríbenos un Correo", subtitle: "hola@ccer.org", href: "mailto:hola@ccer.org", icon: "mail" },
      { title: "Llámanos", subtitle: "+1 (809) 555-0123", href: "tel:+18095550123", icon: "phone" },
      { title: "Pedir Oración", subtitle: "Queremos acompañarte en tu proceso", href: "https://wa.me/18095550123", icon: "heart" },
    ]
  }
];
---

<Layout title={title} description={description}>
  <main class="min-h-screen bg-ccer-earth relative selection:bg-ccer-accent/10">
    <div class="max-w-xl mx-auto px-6 pt-16 pb-24 relative z-10">
      
      <!-- Header -->
      <header class="text-center mb-10">
        <div class="inline-block relative mb-6">
          <div class="relative w-20 h-20 bg-white rounded-3xl shadow-soft border border-slate-100 flex items-center justify-center p-3">
            <img src="/logo.png" alt="CCER Logo" class="max-w-full max-h-full object-contain" />
          </div>
        </div>
        <h1 class="text-2xl md:text-3xl font-serif mb-1 text-ccer-deep leading-tight px-4">Centro Cristiano El Redentor</h1>
        <p class="text-ccer-stone text-[10px] font-light tracking-[0.3em] uppercase">Buscando a Dios en Libertad</p>
      </header>

      <!-- SECCIÓN DESTACADA (Ahora con tamaños iguales al resto) -->
      <div class="space-y-3 mb-10">
        <!-- BOTÓN "LIVE" -->
        <a 
          href={liveAction.href}
          target="_blank"
          class={`${cardBaseStyles} border-red-100 animate-pulse-red relative overflow-hidden`}
        >
          <div class="absolute top-0 right-0 p-3">
             <span class="flex h-2 w-2 relative">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span>
             </span>
          </div>
          
          <div class={`${iconBaseStyles} bg-red-600 text-white`}>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="6 3 20 12 6 21 6 3"/></svg>
          </div>
          
          <div class="flex flex-col text-left">
            <span class="font-bold text-sm tracking-tight text-ccer-deep group-hover:text-red-600 transition-colors">{liveAction.title}</span>
            <span class="text-[11px] text-ccer-stone font-light italic">{liveAction.subtitle}</span>
          </div>
        </a>

        <!-- TARJETA WEB PRINCIPAL -->
        <a 
          href={mainWeb.href}
          class={`${cardBaseStyles} border-ccer-accent/10`}
        >
          <div class={`${iconBaseStyles} bg-ccer-accent text-white`}>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          </div>
          <div class="flex flex-col text-left">
            <span class="font-bold text-sm tracking-tight leading-tight">{mainWeb.title}</span>
            <span class="text-[11px] font-light opacity-60 text-ccer-stone">{mainWeb.subtitle}</span>
          </div>
          <div class="ml-auto opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14m-7-7 7 7-7 7"/></svg>
          </div>
        </a>
      </div>

      <!-- Grupos de Enlaces Originales -->
      <div class="space-y-12 mb-16">
        {linkGroups.map((group) => (
          <section>
            <div class="flex items-center gap-4 mb-6">
              <h2 class="text-[9px] font-black uppercase tracking-[0.4em] text-ccer-stone/40 flex-none">{group.category}</h2>
              <div class="h-px bg-slate-200/60 flex-grow"></div>
            </div>
            
            <div class="grid gap-3">
              {group.links.map((link) => (
                <a 
                  href={link.href}
                  target="_blank"
                  class={`${cardBaseStyles} border-slate-100`}
                >
                  <div class={`${iconBaseStyles} bg-ccer-earth text-ccer-stone transition-colors group-hover:bg-slate-100`}>
                    {link.icon === 'facebook' && (
                      <svg role="img" viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <title>Facebook</title>
                        <path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"/>
                      </svg>
                    )}
                    {link.icon === 'instagram' && (
                      <svg role="img" viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <title>Instagram</title>
                        <path d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"/>
                      </svg>
                    )}
                    {link.icon === 'video' && (
                      <svg role="img" viewBox="0 0 24 24" width="22" height="22" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <title>YouTube</title>
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                      </svg>
                    )}
                    {link.icon === 'mail' && <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>}
                    {link.icon === 'phone' && <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>}
                    {link.icon === 'heart' && <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.505 4.046 3 5.5L12 21Z"/></svg>}
                  </div>

                  <div class="flex flex-col text-left">
                    <span class="font-bold text-sm tracking-tight leading-tight">{link.title}</span>
                    <span class="text-[11px] font-light opacity-60 text-ccer-stone">{link.subtitle}</span>
                  </div>

                  <div class="ml-auto opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14m-7-7 7 7-7 7"/></svg>
                  </div>
                </a>
              ))}
            </div>
          </section>
        ))}
      </div>

      <!-- VISÍTANOS -->
      <section>
        <div class="flex items-center gap-4 mb-6">
          <h2 class="text-[9px] font-black uppercase tracking-[0.4em] text-ccer-stone/40 flex-none">Visítanos</h2>
          <div class="h-px bg-slate-200/60 flex-grow"></div>
        </div>

        <div class="bg-white rounded-[2.5rem] p-6 shadow-soft border border-slate-100 overflow-hidden">
          <div class="flex flex-col gap-6 text-center">
            <h3 class="text-2xl font-serif italic text-ccer-deep whitespace-nowrap">Santiago es nuestra casa</h3>
            
            <p class="text-ccer-stone text-xs font-light leading-relaxed">
              Av. Franco Bidó, #420, <br>
              <span class="font-medium text-ccer-deep">Camboya Marilopez, Santiago de los Caballeros.</span>
            </p>

            <div class="w-full aspect-video rounded-2xl overflow-hidden border border-slate-50 shadow-inner">
              <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4644.4752552098635!2d-70.69176642396687!3d19.42912598184956!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8eb1cf14460dd623%3A0xf0d7784bceeae468!2sCentro%20Cristiano%20El+Redentor!5e1!3m2!1ses-419!2sdo!4v1767963698157!5m2!1ses-419!2sdo" 
                width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" title="Ubicación CCER" referrerpolicy="no-referrer-when-downgrade"
              ></iframe>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 w-full">
              <button 
                id="copyBtn" 
                class="bg-ccer-earth text-ccer-deep px-4 py-3 rounded-xl font-bold text-[9px] uppercase tracking-[0.2em] border border-slate-100 hover:bg-white hover:shadow-sm transition-all active:scale-95 cursor-pointer"
              >
                Copiar Dirección
              </button>
              <a 
                href="https://maps.app.goo.gl/wrj21J2wkqodBeT97" 
                target="_blank" 
                class="bg-ccer-deep text-white px-4 py-3 rounded-xl font-bold text-[9px] uppercase tracking-[0.2em] hover:bg-ccer-accent transition-all text-center active:scale-95"
              >
                Abrir GPS
              </a>
            </div>
          </div>
        </div>
      </section>

      <footer class="mt-20 text-center opacity-30">
        <p class="text-[8px] font-black uppercase tracking-[0.5em] text-ccer-stone leading-loose">
          © 2026 Santiago de los Caballeros <br> 
          Centro Cristiano El Redentor
        </p>
      </footer>

    </div>
  </main>

  <div id="toast" class="invisible opacity-0 fixed bottom-8 left-1/2 -translate-x-1/2 bg-ccer-deep text-ccer-earth px-6 py-3 rounded-2xl z-[1000] text-[9px] font-black uppercase tracking-[0.2em] shadow-2xl transition-all duration-500 transform translate-y-4">
      Dirección copiada
  </div>
</Layout>

<script>
  const init = () => {
    const copyBtn = document.getElementById('copyBtn');
    const toast = document.getElementById('toast');
    const address = "Av. Franco Bidó, #420, Camboya Marilopez, Santiago de los Caballeros, República Dominicana";

    const showToast = () => {
      if (!toast) return;
      toast.classList.remove('invisible', 'opacity-0', 'translate-y-4');
      toast.classList.add('visible', 'opacity-100', 'translate-y-0');
      setTimeout(() => {
        toast.classList.add('invisible', 'opacity-0', 'translate-y-4');
        toast.classList.remove('visible', 'opacity-100', 'translate-y-0');
      }, 3000);
    };

    copyBtn?.addEventListener('click', () => {
      if (navigator.clipboard) {
        navigator.clipboard.writeText(address).then(showToast);
      } else {
        const textArea = document.createElement("textarea");
        textArea.value = address;
        document.body.appendChild(textArea);
        textArea.select();
        try { document.execCommand('copy'); showToast(); } catch (err) {}
        document.body.removeChild(textArea);
      }
    });
  };

  document.addEventListener('DOMContentLoaded', init);
  document.addEventListener('astro:after-swap', init);
</script>

<style>
  @keyframes pulse-red {
    0% { border-color: rgba(239, 68, 68, 0.1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.1); }
    50% { border-color: rgba(239, 68, 68, 0.3); box-shadow: 0 0 15px 0 rgba(239, 68, 68, 0.05); }
    100% { border-color: rgba(239, 68, 68, 0.1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.1); }
  }
  .animate-pulse-red {
    animation: pulse-red 2.5s infinite ease-in-out;
  }
  iframe {
    filter: contrast(0.9) brightness(1.05) grayscale(0.2);
  }
</style>